(this.webpackJsonpgenify=this.webpackJsonpgenify||[]).push([[0],{100:function(e,t,a){e.exports=a(153)},124:function(e,t,a){},127:function(e){e.exports=JSON.parse('{"name":"genify","version":"3.0.1","homepage":"https://genify.joshlmao.com","private":true,"dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.29","@fortawesome/free-brands-svg-icons":"^5.13.1","@fortawesome/free-solid-svg-icons":"^5.13.1","@fortawesome/react-fontawesome":"^0.1.11","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","aromanize":"^0.1.5","axios":"^0.19.2","bootstrap":"^4.5.0","cyrillic-to-translit-js":"^3.1.0","kuroshiro":"^1.1.2","kuroshiro-analyzer-kuromoji":"^1.1.0","pinyin4js":"^1.3.18","react":"^16.13.1","react-bootstrap":"^1.1.1","react-bootstrap-range-slider":"^1.0.0","react-dom":"^16.13.1","react-router-dom":"^5.2.0","react-scripts":"3.4.1","traditional-or-simplified":"^1.0.3"},"scripts":{"predeploy":"npm run build","deploy":"gh-pages -d build -m \\"v3.0.0 update\\"","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.1.0"}}')},149:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(27),r=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(6),l=a(7),c=a(14),u=a(13),m=a(30),h=a(8),p=a(9),d=a(155),g=a(156),y=a(157),f=a(161),v=a(11),k=a(34),b="jZPEvjdl6Sk1RJUDoo0tTuEFYv2B8rbosLsOUnFBqbi11dCtfftjiN911-a9q0lo",E="https://genify-proxy.herokuapp.com/";var S=a(33),C=a.n(S),x={getUserAuthentificationUrl:function(){var e=encodeURIComponent("https://genify.joshlmao.com/callback"),t=encodeURIComponent(["streaming","user-read-currently-playing","user-read-playback-state","user-modify-playback-state","app-remote-control","user-read-email","user-read-private"].join(" "));return"https://accounts.spotify.com/authorize?client_id=".concat("f4dc97c399124fc99254c5d7ac2bf4bd","&response_type=").concat("token","&redirect_uri=").concat(e,"&scope=").concat(t)},parseAuth:function(e){var t=e.split("&");if(2===t.length&&"error"===t[0].substring(0,4))return!1;var a=t[0].split("=")[1],n=t[1].substring(611),s=t[2].substring(11);return{authToken:a,tokenType:n,expireDate:this.getAuthExpireTime(s)}},getAuthExpireTime:function(e){return new Date(Date.now()+1e3*e)},getCurrentPlaybackState:function(e,t){C()({method:"GET",url:"https://api.spotify.com/v1/me/player/",headers:{Authorization:"Bearer "+e},timeout:3e4}).then((function(e){t&&t(e.data)})).catch((function(e){console.error(e)}))},makeApiRequest:function(e,t,a,n){C()({method:e,url:t,headers:{Authorization:"Bearer "+a},timeout:3e4}).then((function(e){n&&n(e.data)})).catch((function(e){console.error(e)}))},pause:function(e){this.makeApiRequest("PUT","https://genify-proxy.herokuapp.com/https://api.spotify.com/v1/me/player/pause",e)},play:function(e){this.makeApiRequest("PUT","https://genify-proxy.herokuapp.com/https://api.spotify.com/v1/me/player/play",e)},previousTrack:function(e){this.makeApiRequest("POST","https://genify-proxy.herokuapp.com/https://api.spotify.com/v1/me/player/previous",e)},nextTrack:function(e){this.makeApiRequest("POST","https://genify-proxy.herokuapp.com/https://api.spotify.com/v1/me/player/next",e)},setVolume:function(e,t){var a=E+"https://api.spotify.com/v1/me/player/volume";a+="?volume_percent="+t,this.makeApiRequest("PUT",a,e)},seek:function(e,t){var a=E+"https://api.spotify.com/v1/me/player/seek";a+="?position_ms="+t,this.makeApiRequest("PUT",a,e)}},N=function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,null,[{key:"setCookie",value:function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var s="expires="+n.toUTCString();document.cookie=e+"="+t+";"+s+";path=/;"}},{key:"getCookie",value:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var s=a[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null}},{key:"deleteCookie",value:function(e){for(var t=document.cookie.split(";"),a=-1,n=0;n<t.length;n++){for(var s=t[n];" "===s.charAt(0);)s=s.substring(1);0===s.indexOf(e)&&(a=n)}t.splice(a,1),document.cookie=t.join(";")}},{key:"checkCookie",value:function(t){return""!==e.getCookie(t)}}]),e}(),T="spotify-auth";a(124);var w=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var s=new URLSearchParams(n.props.location.search).get("auth");return n.state={authStatus:s,showAuthError:null!==s,redirect:null},n.onGetSpotifyAuth=n.onGetSpotifyAuth.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"onGetSpotifyAuth",value:function(){var e=N.getCookie(T);if(null!==e&&Date.now()<e.expiryDate)this.setState({redirect:"/app"});else{var t=x.getUserAuthentificationUrl();window.location=t}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"text-center genify-home splash-gradiant text-white"},s.a.createElement(d.a,{className:"h-100 mx-0"},s.a.createElement(g.a,{className:"my-auto"},s.a.createElement("h1",{style:{fontSize:"3rem",fontWeight:"300"}},"Genify"),s.a.createElement("h4",{style:{fontWeight:"300"},className:"py-2"},"Combining music, lyrics and video"),s.a.createElement(y.a,{className:"spotify-background py-2 px-5",style:{fontSize:"1.25rem",width:"250px"},onClick:this.onGetSpotifyAuth},s.a.createElement(v.a,{icon:k.b,className:"mr-2"}),"Sign In"),s.a.createElement("div",{className:"mx-auto mt-3"},s.a.createElement("a",{href:"https://joshlmao.com",className:"my-auto mr-2 text-white"},"JoshLmao"),s.a.createElement("a",{href:"https://twitter.com/joshlmao"},s.a.createElement(y.a,{className:"py-0 px-2",variant:"outline-light"},s.a.createElement(v.a,{icon:k.c})))))),this.state.authStatus&&s.a.createElement(f.a,{show:this.state.showAuthError,onClose:function(){return e.setState({showAuthError:!1})},className:"mr-2 mb-2 text-left",style:{position:"absolute",bottom:0,right:0,color:"black"}},s.a.createElement(f.a.Header,null,s.a.createElement("strong",{className:"mr-auto"},"A Problem Occured")),s.a.createElement(f.a.Body,null,function(e){switch(e){case"invalid":return"A problem has occured trying to get the user auth. Please try again";case"expired":return"User's authorization has expired. Please sign in again";default:return"Unknown error"}}(this.state.authStatus))),this.state.redirect&&s.a.createElement(h.a,{to:this.state.redirect}))}}]),a}(n.Component),j=a(162),O=a(160),P=a(158),L=a(88),A=a(127);var R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={displayChangelog:!1},n.toggleChangelog=n.toggleChangelog.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"toggleChangelog",value:function(){this.setState({displayChangelog:!this.state.displayChangelog})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"genify-navbar"},s.a.createElement(j.a,{expand:"sm",style:{backgroundColor:"#111111"}},s.a.createElement(g.a,null,s.a.createElement(j.a.Brand,{href:"/",className:"text-white"},"Genify"),s.a.createElement(O.a.Link,{className:"p-0 align-bottom mt-1",style:{fontSize:"0.85rem"},href:"",onClick:this.toggleChangelog},A?"v"+A.version:"v0.0.0"),s.a.createElement(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(j.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(O.a,{className:"ml-auto"},s.a.createElement(O.a.Link,{className:"py-0",href:"https://github.com/JoshLmao/Genify"},s.a.createElement(y.a,{variant:"outline-secondary"},s.a.createElement(v.a,{icon:k.a}))),s.a.createElement(O.a.Link,{className:"py-0",href:"https://twitter.com/JoshLmao"},s.a.createElement(y.a,{variant:"outline-secondary"},s.a.createElement(v.a,{icon:k.c}))))))),this.state.displayChangelog&&s.a.createElement(P.a,{size:"lg",show:this.state.displayChangelog,onHide:function(){return e.toggleChangelog()}},s.a.createElement(P.a.Header,{closeButton:!0,style:{backgroundColor:"#111",borderColor:"#222"}},s.a.createElement(P.a.Title,{id:"example-modal-sizes-title-lg"},"Changelog")),s.a.createElement(P.a.Body,{style:{backgroundColor:"#111",borderColor:"#222"}},L.logs.map((function(e){return s.a.createElement("div",null,s.a.createElement("h3",null,e.version),s.a.createElement("ul",null,e.changes.map((function(e){return s.a.createElement("li",null,e)}))))}))),s.a.createElement(P.a.Footer,{style:{backgroundColor:"#111",borderColor:"#222"}},s.a.createElement(y.a,{variant:"outline-light",className:"ml-auto",onClick:function(){return e.toggleChangelog()}},"Close"))))}}]),a}(n.Component),z=a(16),M=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={redirect:""},n.onReturn=n.onReturn.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"onReturn",value:function(){this.setState({redirect:"/"})}},{key:"render",value:function(){return s.a.createElement(d.a,{className:"w-100 spotify-black genify-home px-0"},s.a.createElement(g.a,{className:"pt-5"},s.a.createElement("h2",{className:"text-center pt-5"},"Error 404: Page Not Found"),s.a.createElement("h6",{className:"text-center"},"\u4f60\u8ff7\u8def\u4e86\u5417\uff1f"),s.a.createElement("div",{className:"py-3"}),s.a.createElement("h5",{className:"mx-auto"},"This page can't be found. Are you sure you typed it in correctly?"),s.a.createElement("div",{className:"mx-auto"},s.a.createElement(y.a,{className:"mx-auto",onClick:this.onReturn,variant:"outline-light"},s.a.createElement(v.a,{icon:z.a,className:"mr-2"}),"Click here to get right back to the music"))),this.state.redirect&&s.a.createElement(h.a,{to:this.state.redirect},"here"))}}]),a}(n.Component),U=a(94),D=a(60),_=a.n(D);function I(e){var t=(e/1e3).toFixed(0),a=Math.floor(t/60),n="";return a>59&&(a=(a-=60*(n=(n=Math.floor(a/60))>=10?n:"0"+n))>=10?a:"0"+a),t=(t=Math.floor(t%60))>=10?t:"0"+t,""!==n?n+":"+a+":"+t:a+":"+t}var F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n,s;return Object(i.a)(this,a),(s=t.call(this,e)).state={authToken:e.authToken,playState:e.playState,volumePercent:e.playState?null===(n=e.playState.device)||void 0===n?void 0:n.volume_percent:0,trackProgressMs:e.playState?e.playState.progress_ms:0,isChangingTrackProgress:!1},s.onPlayPause=s.onPlayPause.bind(Object(p.a)(s)),s.onNextTrack=s.onNextTrack.bind(Object(p.a)(s)),s.onPreviousTrack=s.onPreviousTrack.bind(Object(p.a)(s)),s.onToggleVolumeMute=s.onToggleVolumeMute.bind(Object(p.a)(s)),s.onVolumeChanged=s.onVolumeChanged.bind(Object(p.a)(s)),s.onFinishVolumeChanged=s.onFinishVolumeChanged.bind(Object(p.a)(s)),s.onProgressChanged=s.onProgressChanged.bind(Object(p.a)(s)),s.onFinishProgressChanged=s.onFinishProgressChanged.bind(Object(p.a)(s)),s}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){var t,a,n;e.playState!==this.props.playState&&this.setState({playState:this.props.playState,volumePercent:null===(t=this.props.playState)||void 0===t||null===(a=t.device)||void 0===a?void 0:a.volume_percent,trackProgressMs:null===(n=this.props.playState)||void 0===n?void 0:n.progress_ms});e.authToken!==this.props.authToken&&this.setState({authToken:this.props.authToken})}},{key:"onPlayPause",value:function(){this.state.playState&&(this.state.playState.is_playing?x.pause(this.state.authToken):x.play(this.state.authToken))}},{key:"onNextTrack",value:function(){x.nextTrack(this.state.authToken)}},{key:"onPreviousTrack",value:function(){x.previousTrack(this.state.authToken)}},{key:"onToggleVolumeMute",value:function(){var e;this.state.playState&&((null===(e=this.state.playState.device)||void 0===e?void 0:e.volume_percent)>0?x.setVolume(this.state.authToken,0):x.setVolume(this.state.authToken,25))}},{key:"onVolumeChanged",value:function(e){this.setState({volumePercent:parseInt(e.target.value)})}},{key:"onFinishVolumeChanged",value:function(){var e;this.state.volumePercent!==(null===(e=this.state.playState.device)||void 0===e?void 0:e.volume_percent)&&(console.log("Web API: Set volume to "+this.state.volumePercent),x.setVolume(this.state.authToken,this.state.volumePercent))}},{key:"onProgressChanged",value:function(e){this.setState({trackProgressMs:parseInt(e.target.value)}),this.state.isChangingTrackProgress||this.setState({isChangingTrackProgress:!0})}},{key:"onFinishProgressChanged",value:function(){this.state.playState&&this.state.playState.progress_ms!==this.state.trackProgressMs&&x.seek(this.state.authToken,this.state.trackProgressMs),this.setState({isChangingTrackProgress:!1})}},{key:"render",value:function(){var e,t,a,n,o,r,i,l,c,u,m,h,p;return s.a.createElement(d.a,{className:"w-100 mx-0 genify-player",style:{backgroundColor:"rgb(40,40,40)"}},s.a.createElement(U.a,{xl:3,lg:3,md:4,sm:5,xs:12},s.a.createElement("div",{className:"d-flex align-items-center my-auto"},s.a.createElement("a",{href:this.state.playState?null===(e=this.state.playState.item)||void 0===e||null===(t=e.album)||void 0===t||null===(a=t.external_urls)||void 0===a?void 0:a.spotify:"#",className:"ml-2 p-2"},s.a.createElement("img",{className:"album-art",alt:this.state.playState?(null===(n=this.state.playState.item)||void 0===n?void 0:n.artists[0].name)+"Album Art":"Unknown Album",src:this.state.playState?null===(o=this.state.playState)||void 0===o||null===(r=o.item)||void 0===r||null===(i=r.album)||void 0===i?void 0:i.images[1].url:"https://via.placeholder.com/75",style:{maxWidth:"75px",maxHeight:"75px"}})),s.a.createElement("div",{className:"w-100 ml-2"},s.a.createElement("a",{href:this.state.playState?null===(l=this.state.playState.item)||void 0===l||null===(c=l.external_urls)||void 0===c?void 0:c.spotify:"#"},s.a.createElement("h6",{className:"song-info"},this.state.playState?null===(u=this.state.playState.item)||void 0===u?void 0:u.name:"Unknown")),s.a.createElement("h6",{className:"song-info"},this.state.playState?function(e){var t;if(!e)return null;var a=null===(t=e.item)||void 0===t?void 0:t.artists;return a?s.a.createElement("div",{className:"d-flex"},a.map((function(e,t){return s.a.createElement("div",{className:"d-flex",key:e.name},s.a.createElement("a",{href:e.external_urls.spotify},e.name),t<a.length-1&&s.a.createElement("div",{className:"pr-1"}," ,"))}))):null}(this.state.playState):"Unknown")))),s.a.createElement(U.a,{xl:6,lg:6,md:5,sm:7,className:"d-none d-sm-block my-auto"},s.a.createElement("div",{className:"d-flex align-items-center my-1"},s.a.createElement("div",{className:"mx-auto my-1"},s.a.createElement(y.a,{className:"mx-2",variant:"outline-light",onClick:this.onPreviousTrack},s.a.createElement(v.a,{icon:z.e})),s.a.createElement(y.a,{className:"mx-2",variant:"outline-light",onClick:this.onPlayPause},s.a.createElement(v.a,{icon:(null===(m=this.state.playState)||void 0===m?void 0:m.is_playing)?z.b:z.c})),s.a.createElement(y.a,{className:"mx-2",variant:"outline-light",onClick:this.onNextTrack},s.a.createElement(v.a,{icon:z.f})))),s.a.createElement("div",{className:"d-flex align-items-center my-1"},s.a.createElement("h6",{className:"my-auto mx-2"},this.state.playState&&I(this.state.isChangingTrackProgress?this.state.trackProgressMs:this.state.playState.progress_ms),!this.state.playState&&"0:00"),s.a.createElement("div",{className:"w-100",onMouseUp:this.onFinishProgressChanged},s.a.createElement(_.a,{value:this.state.trackProgressMs,min:0,max:this.state.playState?null===(h=this.state.playState.item)||void 0===h?void 0:h.duration_ms:100,onChange:this.onProgressChanged,tooltip:"off"})),s.a.createElement("h6",{className:"my-auto mx-2"},this.state.playState&&I(null===(p=this.state.playState.item)||void 0===p?void 0:p.duration_ms),!this.state.playState&&"9:59"))),s.a.createElement(U.a,{xl:3,lg:3,md:3,className:"d-none d-md-block my-auto"},s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement(y.a,{className:"mx-2",variant:"outline-light",onClick:this.onToggleVolumeMute},s.a.createElement(v.a,{icon:0===this.state.volumePercent?z.g:z.h})),s.a.createElement("div",{onMouseUp:this.onFinishVolumeChanged,className:"w-100"},s.a.createElement(_.a,{value:this.state.volumePercent,onChange:this.onVolumeChanged,tooltip:"auto",variant:"primary"})))))}}]),a}(n.Component),V=a(159),B=a(95),G=a.n(B),q="none",H="english",J="simplified-chinese",W="traditional-chinese",$="korean",K="japanese",Y="russian";var Z=a(99),Q=a(96),X=a(61),ee=a.n(X),te=a(97),ae=a.n(te),ne=a(98),se=a.n(ne),oe=a(62);function re(e){return e.replace(/ *\([^)]*\) */g,"")}function ie(e){return e.replace(/^\s+|\s+$/g,"")}var le={search:function(e,t){if(!e)return null;var a=re(e.item.name),n=encodeURIComponent("".concat(a," ").concat(e.item.artists[0].name)),s=E+"https://api.genius.com/search?q="+n;C()({method:"GET",url:s,headers:{Authorization:"Bearer "+b},timeout:3e4}).then((function(e){t&&t(e.data)})).catch((function(e){console.error(e)}))},parseLyricsFromUrl:function(e,t){var a=E+e+"?react=1";C()({method:"GET",url:a,headers:{Authorization:"Bearer "+b},timeout:3e4}).then((function(e){if(t){var n="",s=function(e){var t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,t.body}(e.request.responseText);if(s.querySelectorAll(".lyrics").length<=0){var o,r=s.getElementsByTagName("div"),i=Object(oe.a)(r);try{for(i.s();!(o=i.n()).done;){var l=o.value,c=l.className.toLowerCase();if(c.includes("lyric")&&c.includes("container"))n+=l.innerHTML.replace(/<br>/g,"\n").replace(/<[^>]*>?/gm,"")}}catch(p){i.e(p)}finally{i.f()}if(n){var u=ie(n);t(u)}else console.error("Unable to parse lyrics correctly from page ".concat(a))}else{var m=s.querySelectorAll(".lyrics");if(m.length>0){var h=ie(m[0].textContent);t(h)}else console.error("Unable to parse lyrics from old Genius layout")}}})).catch((function(e){console.error(e)}))},getRelevantResult:function(e,t){if(t){if(!(e&&e.length>0))return null;var a,n=Object(oe.a)(e);try{for(n.s();!(a=n.n()).done;){var s=a.value,o=s.result.primary_artist.name.toLowerCase(),r=re(s.result.title).toLowerCase(),i=re(t.name).toLowerCase(),l=t.artists[0].name.toLowerCase();if(o.includes(l)&&r.includes(i)||l.includes(o)&&i.includes(r))return s}}catch(c){n.e(c)}finally{n.f()}}}},ce=(a(149),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var s=new Z.a;return s.init(new Q.a({dictPath:"./dict"})),n.state={playState:e.playState,originalLyrics:null,romanizedLyrics:null,lyricsSpotifyTrackName:null,lyricsInfo:null,loaded:!0,isRomanized:!1,originalLyricLanguage:q,kuroshiro:s},n.updateLyrics=n.updateLyrics.bind(Object(p.a)(n)),n.onToggleRomanize=n.onToggleRomanize.bind(Object(p.a)(n)),n.resetLyricState=n.resetLyricState.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;e.playState!==this.props.playState&&this.setState({playState:this.props.playState},(function(){t.updateLyrics()}))}},{key:"updateLyrics",value:function(){var e,t=this;this.state.playState&&((null===this.state.lyricsSpotifyTrackName||null!==this.state.lyricsSpotifyTrackName&&this.state.playState.item.name!==(null===(e=this.state.lyricsSpotifyTrackName)||void 0===e?void 0:e.name)||!this.state.loaded)&&(this.setState({loaded:!1}),le.search(this.state.playState,(function(e){if(e.response.hits.length>0){var a=le.getRelevantResult(e.response.hits,t.state.playState.item);a?(console.log("Relevant Result: ".concat(a.result.full_title)),le.parseLyricsFromUrl(a.result.url,(function(e){console.log("Loaded and set lyrics from ".concat(a.result.url));var n=function(e){var t=q,a=function(e){return e.match(/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/g)}(e);null!==a&&(t=$);var n=function(e){return e.match(/[\u3041-\u3093\u30a1-\u30f3]/g)}(e),s=function(e){return e.match(/[\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g)}(e);null!==n&&null!==s?t=n.length>s.length?K:J:null!==n?t=K:null!==s&&(t="chinese");var o=function(e){return e.match(/^[\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u042f]+$/)}(e);return null!==o&&(t=Y),"chinese"===t&&(t="simplified"===G.a.detect(e).detectedCharacters?J:W),null==a&&null==n&&null==s&&null==o&&(t=H),t}(e);console.log("Original lyrics language: '".concat(n,"'")),t.setState({originalLyrics:e,romanizedLyrics:e,originalLyricLanguage:n,lyricsInfo:a,loaded:!0,lyricsSpotifyTrackName:t.state.playState.item})}))):(console.log("No related lyrics found for song '".concat(t.state.playState.item.artists[0].name," - ").concat(t.state.playState.item.name,"'")),t.setState({loaded:!0}),t.resetLyricState())}else console.log("Didn't find any search results on Genius"),t.setState({loaded:!0}),t.resetLyricState()}))))}},{key:"resetLyricState",value:function(){this.setState({originalLyrics:null,romanizedLyrics:null,lyricsInfo:null,isRomanized:!1,originalLyricLanguage:q})}},{key:"onToggleRomanize",value:function(){var e=this;if(this.state.isRomanized)this.setState({romanizedLyrics:this.state.originalLyrics});else{var t="";switch(this.state.originalLyricLanguage){case K:t="ROMANIZED",this.state.kuroshiro.convert(this.state.originalLyrics,{to:"romaji",mode:"spaced"}).then((function(t){t=t.replace(/ +(?= )/g,""),e.setState({romanizedLyrics:t})}));break;case J:case W:t=ee.a.convertToPinyinString(this.state.originalLyrics," ",ee.a.WITH_TONE_MARK);break;case $:t=ae.a.romanize(this.state.originalLyrics);break;case Y:t=se()().transform(this.state.originalLyrics," ")}this.setState({romanizedLyrics:t})}this.setState({isRomanized:!this.state.isRomanized})}},{key:"render",value:function(){return s.a.createElement("div",{className:"w-100 lyrics-container py-2"},s.a.createElement("div",{className:"text-center h-100"},!this.state.loaded&&s.a.createElement(v.a,{className:"fa-spin",size:"3x",icon:z.d}),this.state.romanizedLyrics&&this.state.loaded&&s.a.createElement("div",{className:"h-100"},s.a.createElement("div",{className:"pr-5 mb-2 text-right d-none d-sm-block",style:{height:"35px",position:"absolute",right:0,fontSize:"0.8rem"}},s.a.createElement("h6",{className:"mb-1"},"Lyric Info"),s.a.createElement("a",{href:this.state.lyricsInfo.result.url,className:"py-1"},this.state.lyricsInfo.result.full_title),this.state.originalLyricLanguage!==H&&s.a.createElement(V.a,null,s.a.createElement(V.a.Check,{type:"switch",id:"custom-switch",label:"Romanize",onChange:this.onToggleRomanize}))),s.a.createElement("div",{className:"lyrics-content"},this.state.romanizedLyrics)),!this.state.originalLyrics&&this.state.loaded&&s.a.createElement("a",{href:"https://genius.com/new"},s.a.createElement(y.a,{variant:"outline-light",className:"mt-2"},"Add to Genius"))))}}]),a}(n.Component)),ue=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var s="",o=N.getCookie(T),r=JSON.parse(o);return null===r?(s="/?auth=invalid",console.log("No or auth found in cookies, going home")):(r.expireDate=new Date(r.expireDate),r.expireDate<Date.now()?(N.deleteCookie(T),s="/?auth=expired",console.log("Auth found but has expired")):console.log("Auth found. Expires at '".concat(r.expireDate.toLocaleString(),"'"))),n.state={auth:r,infoMessage:"",showInfoMessage:!1,redirect:s},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(null===this.state.auth)this.setState({redirect:"/?auth=invalid"});else{x.getCurrentPlaybackState(this.state.auth.authToken,(function(t){console.log(t),e.setState({playState:t,loaded:!0})})),setInterval((function(){x.getCurrentPlaybackState(e.state.auth.authToken,(function(t){var a,n,s;(null===(a=t.item)||void 0===a?void 0:a.name)!==(null===(n=e.state.playState.item)||void 0===n?void 0:n.name)&&console.log("TRACK CHANGED | ".concat(t.item.artists[0].name," - ").concat(null===(s=t.item)||void 0===s?void 0:s.name));e.setState({playState:t})}))}),2e3);var t=this.state.auth.expireDate-new Date(Date.now());setTimeout((function(){console.log("showing info message"),e.setState({infoMessage:"User authorization is about to expire in one minute",showInfoMessage:!0})}),t-6e4)}}},{key:"render",value:function(){var e,t=this;return s.a.createElement("div",{className:"genify-home spotify-black"},s.a.createElement(d.a,{className:"mx-0"},s.a.createElement(F,{playState:this.state.playState,authToken:null===(e=this.state.auth)||void 0===e?void 0:e.authToken})),s.a.createElement(ce,{playState:this.state.playState}),this.state.infoMessage&&s.a.createElement(f.a,{show:this.state.showInfoMessage,onClose:function(){return t.setState({showInfoMessage:!1})},className:"mr-2 mb-2 text-left",style:{position:"absolute",bottom:0,right:0,color:"black"}},s.a.createElement(f.a.Header,null,s.a.createElement("strong",{className:"mr-auto"},"Info")),s.a.createElement(f.a.Body,null,this.state.infoMessage)),this.state.redirect&&s.a.createElement(h.a,{to:this.state.redirect}))}}]),a}(n.Component),me=(a(150),a(151),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n,s;Object(i.a)(this,a),s=t.call(this,e);var o=null;return(null===(n=e.location)||void 0===n?void 0:n.hash)&&(o=x.parseAuth(e.location.hash.substring(1))),s.state={auth:o},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.state.auth){var t=JSON.stringify(this.state.auth);N.setCookie(T,t)}else console.error("No auth saved to cookies, error occured");setTimeout((function(){e.setState({redirect:"/app"})}),100)}},{key:"render",value:function(){return s.a.createElement("div",{className:"h-100 w-100 spotify-black"},s.a.createElement("h3",{className:"text-center pt-5"},"Redirecting..."),s.a.createElement("div",{className:"mx-auto",style:{width:"50px"}},s.a.createElement(v.a,{className:"fa-spin",size:"3x",icon:z.d})),this.state.redirect&&s.a.createElement(h.a,{to:this.state.redirect}))}}]),a}(n.Component)),he=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement(m.a,{basename:""},s.a.createElement(R,null),s.a.createElement(h.d,null,s.a.createElement(h.b,{exact:!0,path:"/",component:w}),s.a.createElement(h.b,{exact:!0,path:"/app",component:ue}),s.a.createElement(h.b,{exact:!0,path:"/callback",component:me}),s.a.createElement(h.b,{component:M})))}}]),a}(n.Component),pe=(a(152),s.a.createElement(s.a.StrictMode,null,s.a.createElement(he,null)));r.a.render(pe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e){e.exports=JSON.parse('{"logs":[{"version":"3.0.1","changes":["Fixed the app using expired auth causing no access"]},{"version":"3.0.0: The React Update \ud83c\udf89","changes":["Changed site to use React","Site speed improved by a lot","Removed Youtube video player and options (for now)","Removed ability to change Spotify playback device (for now)","Improved overall app flow for getting user authorization","Added information about current Genius lyrics","Able to detect and romanize Russian lyrics","Can set the current playback time of the current Spotify track","User can set volume of current playback device","Can view and navigate to all artists on current track"]}]}')}},[[100,1,2]]]);
//# sourceMappingURL=main.884f2f4a.chunk.js.map